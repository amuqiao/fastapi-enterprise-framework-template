# 12.3 常用Docker镜像

## 12.3.1 基础镜像

### 12.3.1.1 Alpine Linux

- **镜像名称**：`alpine`
- **主要版本**：`3.16`, `3.17`, `3.18`
- **用途**：轻量级基础镜像，适用于大多数应用
- **主要特点**：
  - 非常小（约5MB）
  - 安全、稳定
  - 包管理工具：`apk`
  - 适用于构建小型、高效的容器
- **使用示例**：
  ```bash
  docker run -it alpine:3.18 sh
  ```

### 12.3.1.2 Ubuntu

- **镜像名称**：`ubuntu`
- **主要版本**：`20.04`, `22.04`, `23.04`
- **用途**：通用基础镜像，适用于需要完整Linux环境的应用
- **主要特点**：
  - 完整的Ubuntu发行版
  - 广泛的软件包支持
  - 包管理工具：`apt`
  - 适用于复杂应用和开发环境
- **使用示例**：
  ```bash
  docker run -it ubuntu:22.04 bash
  ```

### 12.3.1.3 Debian

- **镜像名称**：`debian`
- **主要版本**：`10`, `11`, `12`
- **用途**：稳定的基础镜像，适用于生产环境
- **主要特点**：
  - 稳定、可靠
  - 较小的镜像体积
  - 包管理工具：`apt`
  - 适用于生产环境的应用
- **使用示例**：
  ```bash
  docker run -it debian:11 bash
  ```

## 12.3.2 Web服务器

### 12.3.2.1 Nginx

- **镜像名称**：`nginx`
- **主要版本**：`1.21`, `1.22`, `1.23`, `1.24`
- **用途**：高性能的HTTP和反向代理服务器
- **主要特点**：
  - 高性能、低内存占用
  - 支持虚拟主机
  - 支持反向代理和负载均衡
  - 支持HTTPS
  - 丰富的模块生态
- **使用示例**：
  ```bash
  docker run -d -p 80:80 nginx:1.24-alpine
  ```

### 12.3.2.2 Apache

- **镜像名称**：`httpd`
- **主要版本**：`2.4`
- **用途**：流行的HTTP服务器
- **主要特点**：
  - 稳定、可靠
  - 支持多种模块
  - 支持虚拟主机
  - 支持HTTPS
  - 丰富的文档和社区支持
- **使用示例**：
  ```bash
  docker run -d -p 80:80 httpd:2.4-alpine
  ```

## 12.3.3 应用服务器

### 12.3.3.1 Node.js

- **镜像名称**：`node`
- **主要版本**：`16`, `18`, `20`
- **用途**：JavaScript运行时环境
- **主要特点**：
  - 支持JavaScript/TypeScript
  - 适用于Web应用开发
  - 丰富的包管理工具：`npm`, `yarn`, `pnpm`
  - 支持前后端开发
- **使用示例**：
  ```bash
  docker run -it node:18-alpine sh
  ```

### 12.3.3.2 Python

- **镜像名称**：`python`
- **主要版本**：`3.9`, `3.10`, `3.11`
- **用途**：Python编程语言运行时
- **主要特点**：
  - 支持Python开发
  - 丰富的包管理工具：`pip`
  - 适用于Web开发、数据分析、机器学习等
  - 多种衍生镜像：`python:slim`, `python:alpine`
- **使用示例**：
  ```bash
  docker run -it python:3.11-alpine sh
  ```

### 12.3.3.3 Java

- **镜像名称**：`openjdk`
- **主要版本**：`11`, `17`, `20`
- **用途**：Java开发和运行环境
- **主要特点**：
  - 支持Java应用开发和运行
  - 多种衍生镜像：`openjdk:slim`, `openjdk:alpine`
  - 适用于Spring Boot、Java EE等应用
- **使用示例**：
  ```bash
  docker run -it openjdk:17-alpine sh
  ```

### 12.3.3.4 Go

- **镜像名称**：`golang`
- **主要版本**：`1.19`, `1.20`, `1.21`
- **用途**：Go编程语言开发环境
- **主要特点**：
  - 支持Go应用开发
  - 内置Go工具链
  - 适用于高并发、高性能应用
  - 支持多阶段构建
- **使用示例**：
  ```bash
  docker run -it golang:1.21-alpine sh
  ```

### 12.3.3.5 PHP

- **镜像名称**：`php`
- **主要版本**：`7.4`, `8.0`, `8.1`, `8.2`
- **用途**：PHP编程语言运行时
- **主要特点**：
  - 支持PHP应用开发和运行
  - 多种衍生镜像：`php:fpm`, `php:apache`
  - 适用于WordPress、Laravel等应用
- **使用示例**：
  ```bash
  docker run -it php:8.2-alpine sh
  ```

## 12.3.4 数据库

### 12.3.4.1 MySQL

- **镜像名称**：`mysql`
- **主要版本**：`5.7`, `8.0`
- **用途**：流行的关系型数据库
- **主要特点**：
  - 稳定、可靠
  - 支持事务和ACID特性
  - 支持复制和集群
  - 适用于各种规模的应用
- **使用示例**：
  ```bash
  docker run -d -p 3306:3306 \
    -e MYSQL_ROOT_PASSWORD=root_password \
    -e MYSQL_DATABASE=myapp \
    mysql:8.0
  ```

### 12.3.4.2 PostgreSQL

- **镜像名称**：`postgres`
- **主要版本**：`13`, `14`, `15`
- **用途**：功能强大的开源关系型数据库
- **主要特点**：
  - 支持复杂查询和高级数据类型
  - 支持JSON和XML数据
  - 支持复制和集群
  - 强大的扩展能力
- **使用示例**：
  ```bash
  docker run -d -p 5432:5432 \
    -e POSTGRES_PASSWORD=postgres \
    -e POSTGRES_DB=myapp \
    postgres:15
  ```

### 12.3.4.3 MongoDB

- **镜像名称**：`mongo`
- **主要版本**：`4.4`, `5.0`, `6.0`
- **用途**：流行的NoSQL文档数据库
- **主要特点**：
  - 灵活的文档模型
  - 支持复制和分片
  - 支持全文搜索和地理空间查询
  - 适用于大数据和实时应用
- **使用示例**：
  ```bash
  docker run -d -p 27017:27017 \
    -e MONGO_INITDB_ROOT_USERNAME=root \
    -e MONGO_INITDB_ROOT_PASSWORD=root_password \
    mongo:6.0
  ```

### 12.3.4.4 Redis

- **镜像名称**：`redis`
- **主要版本**：`6`, `7`
- **用途**：高性能的键值存储数据库
- **主要特点**：
  - 极高的性能（10万+ QPS）
  - 支持多种数据结构
  - 支持持久化
  - 支持复制和集群
  - 适用于缓存、消息队列等
- **使用示例**：
  ```bash
  docker run -d -p 6379:6379 redis:7-alpine
  ```

## 12.3.5 消息队列

### 12.3.5.1 RabbitMQ

- **镜像名称**：`rabbitmq`
- **主要版本**：`3.9`, `3.10`
- **用途**：可靠的消息队列系统
- **主要特点**：
  - 支持多种消息协议（AMQP, MQTT, STOMP）
  - 支持持久化和高可用性
  - 支持多种消息模式
  - 内置管理界面
- **使用示例**：
  ```bash
  docker run -d -p 5672:5672 -p 15672:15672 \
    -e RABBITMQ_DEFAULT_USER=guest \
    -e RABBITMQ_DEFAULT_PASS=guest \
    rabbitmq:3.10-management-alpine
  ```

### 12.3.5.2 Kafka

- **镜像名称**：`bitnami/kafka`
- **主要版本**：`3.3`, `3.4`
- **用途**：高性能的分布式流处理平台
- **主要特点**：
  - 高吞吐量、低延迟
  - 支持水平扩展
  - 支持持久化存储
  - 适用于大数据流处理
- **使用示例**：
  ```bash
  docker run -d -p 9092:9092 \
    -e KAFKA_BROKER_ID=1 \
    -e KAFKA_LISTENERS=PLAINTEXT://:9092 \
    -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://localhost:9092 \
    -e KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181 \
    bitnami/kafka:3.4
  ```

## 12.3.6 监控工具

### 12.3.6.1 Prometheus

- **镜像名称**：`prom/prometheus`
- **主要版本**：`v2.43`
- **用途**：开源监控和告警系统
- **主要特点**：
  - 多维数据模型
  - 灵活的查询语言
  - 强大的告警管理
  - 适用于云原生环境
- **使用示例**：
  ```bash
  docker run -d -p 9090:9090 \
    -v ./prometheus.yml:/etc/prometheus/prometheus.yml \
    prom/prometheus:v2.43.0
  ```

### 12.3.6.2 Grafana

- **镜像名称**：`grafana/grafana`
- **主要版本**：`9.4`
- **用途**：开源的数据可视化和监控平台
- **主要特点**：
  - 丰富的可视化图表
  - 支持多种数据源
  - 强大的告警功能
  - 丰富的插件生态
- **使用示例**：
  ```bash
  docker run -d -p 3000:3000 grafana/grafana:9.4.7
  ```

### 12.3.6.3 cAdvisor

- **镜像名称**：`gcr.io/cadvisor/cadvisor`
- **主要版本**：`v0.47`
- **用途**：容器性能监控工具
- **主要特点**：
  - 实时监控容器资源使用情况
  - 支持多种容器运行时
  - 提供Prometheus兼容的 metrics
  - 轻量级设计
- **使用示例**：
  ```bash
  docker run -d -p 8080:8080 \
    -v /:/rootfs:ro \
    -v /var/run:/var/run:ro \
    -v /sys:/sys:ro \
    -v /var/lib/docker/:/var/lib/docker:ro \
    gcr.io/cadvisor/cadvisor:v0.47.0
  ```

## 12.3.7 日志工具

### 12.3.7.1 ELK Stack

- **镜像名称**：
  - `elasticsearch`
  - `logstash`
  - `kibana`
- **主要版本**：`8.7`
- **用途**：日志收集、存储、分析和可视化平台
- **主要特点**：
  - 强大的日志收集能力
  - 分布式存储和搜索
  - 丰富的可视化图表
  - 支持实时分析
- **使用示例**：
  ```yaml
  version: '3.8'
  services:
    elasticsearch:
      image: elasticsearch:8.7.0
      environment:
        - discovery.type=single-node
      ports:
        - 9200:9200
    kibana:
      image: kibana:8.7.0
      depends_on:
        - elasticsearch
      ports:
        - 5601:5601
  ```

### 12.3.7.2 Loki

- **镜像名称**：`grafana/loki`
- **主要版本**：`2.8`
- **用途**：轻量级日志聚合系统
- **主要特点**：
  - 与Prometheus和Grafana集成良好
  - 基于标签的日志索引
  - 支持多种日志收集方式
  - 低资源消耗
- **使用示例**：
  ```bash
  docker run -d -p 3100:3100 grafana/loki:2.8.0
  ```

## 12.3.8 CI/CD工具

### 12.3.8.1 Jenkins

- **镜像名称**：`jenkins/jenkins`
- **主要版本**：`lts`
- **用途**：流行的CI/CD自动化服务器
- **主要特点**：
  - 支持自动化构建、测试和部署
  - 丰富的插件生态
  - 支持分布式构建
  - 适用于各种规模的项目
- **使用示例**：
  ```bash
  docker run -d -p 8080:8080 -p 50000:50000 \
    -v jenkins-data:/var/jenkins_home \
    jenkins/jenkins:lts-alpine
  ```

### 12.3.8.2 GitLab Runner

- **镜像名称**：`gitlab/gitlab-runner`
- **主要版本**：`latest`
- **用途**：GitLab CI/CD的执行器
- **主要特点**：
  - 与GitLab集成良好
  - 支持多种执行模式
  - 支持并行构建
  - 轻量级设计
- **使用示例**：
  ```bash
  docker run -d --name gitlab-runner --restart always \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v gitlab-runner-config:/etc/gitlab-runner \
    gitlab/gitlab-runner:latest
  ```

## 12.3.9 开发工具

### 12.3.9.1 Docker Compose

- **镜像名称**：`docker/compose`
- **主要版本**：`v2.17`
- **用途**：用于定义和运行多容器Docker应用程序
- **主要特点**：
  - 使用YAML文件定义服务
  - 支持服务编排和管理
  - 简化多容器应用部署
  - 支持环境变量和配置文件
- **使用示例**：
  ```bash
  docker run --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v $(pwd):$(pwd) \
    -w $(pwd) \
    docker/compose:v2.17.3 up -d
  ```

### 12.3.9.2 Dive

- **镜像名称**：`wagoodman/dive`
- **主要版本**：`latest`
- **用途**：Docker镜像分析工具
- **主要特点**：
  - 可视化镜像分层结构
  - 分析镜像大小和组成
  - 识别冗余文件和层
  - 帮助优化镜像
- **使用示例**：
  ```bash
  docker run --rm -it \
    -v /var/run/docker.sock:/var/run/docker.sock \
    wagoodman/dive:latest myimage:latest
  ```

## 12.3.10 其他常用镜像

### 12.3.10.1 Nginx Proxy Manager

- **镜像名称**：`jc21/nginx-proxy-manager`
- **主要版本**：`latest`
- **用途**：管理Nginx反向代理和SSL证书
- **主要特点**：
  - 直观的Web界面
  - 自动生成Let's Encrypt证书
  - 支持TCP和UDP转发
  - 支持访问列表和基本认证
- **使用示例**：
  ```yaml
  version: '3.8'
  services:
    app:
      image: jc21/nginx-proxy-manager:latest
      ports:
        - 80:80
        - 81:81
        - 443:443
      volumes:
        - nginx-proxy-manager-data:/data
        - nginx-proxy-manager-letsencrypt:/etc/letsencrypt
  volumes:
    nginx-proxy-manager-data:
    nginx-proxy-manager-letsencrypt:
  ```

### 12.3.10.2 Portainer

- **镜像名称**：`portainer/portainer-ce`
- **主要版本**：`latest`
- **用途**：Docker管理界面
- **主要特点**：
  - 直观的Web界面
  - 支持容器、镜像、网络、卷管理
  - 支持多环境管理
  - 支持权限管理
- **使用示例**：
  ```bash
  docker run -d -p 9000:9000 \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v portainer-data:/data \
    portainer/portainer-ce:latest
  ```

## 12.3.11 镜像选择建议

1. **根据应用需求选择**：根据应用的语言、框架和依赖选择合适的镜像
2. **选择官方镜像**：优先使用官方或经过验证的镜像
3. **考虑镜像大小**：选择体积小的镜像，提高构建和部署速度
4. **考虑安全性**：选择定期更新、修复安全漏洞的镜像
5. **考虑社区支持**：选择社区活跃、文档丰富的镜像
6. **使用固定版本**：避免使用`latest`标签，使用明确的版本号
7. **考虑衍生镜像**：根据需求选择`alpine`、`slim`等衍生镜像
8. **验证镜像完整性**：使用镜像签名或哈希值验证镜像完整性

通过选择合适的Docker镜像，可以提高应用的构建速度、部署效率和运行安全性。