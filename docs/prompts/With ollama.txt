# With ollama

> [https://ollama.cadn.net.cn/docker.html]()
> 
> [https://ollama.com/library]()
> 
> 

**ä»… CPU**

```Plain Text
docker run -d -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama
```

**å¯åŠ¨å®¹å™¨**

```Plain Text
docker run -d --gpus=all -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama
```

**è¿›å…¥å®¹å™¨\&amp;è¿è¡Œæ¨¡åž‹**

```Plain Text
# è¿›å…¥ Docker å®¹å™¨
docker exec -it ollama bash

# è¿›å…¥å®¹å™¨&è¿è¡Œæ¨¡åž‹
docker exec -it ollama ollama run llama3.2

# å¯åŠ¨å·²å­˜åœ¨çš„å®¹å™¨ï¼ˆå¦‚æžœå®ƒå·²åœæ­¢ï¼‰
docker start ollama

# æŸ¥çœ‹æ—¥å¿—ç¡®è®¤è¿è¡ŒçŠ¶æ€
docker logs -f ollama
```

```Plain Text
# åœæ­¢å®¹å™¨
docker stop ollama

# åˆ é™¤å®¹å™¨
docker rm ollama
```

**é€€å‡º Docker å®¹å™¨**

```Plain Text
CTRL + D
```

**æŸ¥çœ‹å¤§æ¨¡åž‹**

```Bash
ollama list
```

**ç§»é™¤å¤§æ¨¡åž‹**

```Bash
ollama rm codellama:7b
```



## å‚æ•°è¯´æ˜Žï¼š

### 1\. `docker run`

- ä½œç”¨ï¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨å®žä¾‹ã€‚

- è¯´æ˜Žï¼šDocker çš„æ ¸å¿ƒå‘½ä»¤ï¼Œç”¨äºŽä»Žé•œåƒåˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ã€‚

### 2\. `\-d`ï¼ˆ`\-\-detach`ï¼‰

- ä½œç”¨ï¼šä»¥ åŽå°æ¨¡å¼ è¿è¡Œå®¹å™¨ã€‚

- è¯´æ˜Žï¼šå®¹å™¨å¯åŠ¨åŽä¼šä¸Žå½“å‰ç»ˆç«¯åˆ†ç¦»ï¼Œç»ˆç«¯ä¸ä¼šè¢«é˜»å¡žï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–å‘½ä»¤ã€‚

- å…¸åž‹åœºæ™¯ï¼šé€‚ç”¨äºŽéœ€è¦é•¿æœŸè¿è¡Œçš„æœåŠ¡ï¼ˆå¦‚ Web æœåŠ¡å™¨ã€æ•°æ®åº“ç­‰ï¼‰ã€‚

### 3\. `\-v /qjp/software/ollama:/root/\.ollama`ï¼ˆ`\-\-volume`ï¼‰

- ä½œç”¨ï¼šæŒ‚è½½ æ•°æ®å·ï¼Œå®žçŽ°å®¿ä¸»æœºä¸Žå®¹å™¨ä¹‹é—´çš„ç›®å½•æ˜ å°„ã€‚

- å‚æ•°ç»“æž„ï¼š`å®¿ä¸»æœºç›®å½•:å®¹å™¨å†…ç›®å½•`

- è¯´æ˜Žï¼š

- å°†å®¿ä¸»æœºçš„ `/qjp/software/ollama` ç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…çš„ `/root/\.ollama` ç›®å½•ã€‚

- å®¹å™¨å†…çš„ `/root/\.ollama` é€šå¸¸æ˜¯ Ollama çš„é…ç½®å’Œæ•°æ®å­˜å‚¨ç›®å½•ï¼ŒæŒ‚è½½åŽæ•°æ®ä¼šæŒä¹…åŒ–åˆ°å®¿ä¸»æœºï¼Œé¿å…å®¹å™¨åˆ é™¤åŽæ•°æ®ä¸¢å¤±ã€‚

- å…¸åž‹åœºæ™¯ï¼šç”¨äºŽä¿å­˜æ¨¡åž‹æ–‡ä»¶ã€é…ç½®æ–‡ä»¶æˆ–æ—¥å¿—ç­‰æŒä¹…åŒ–æ•°æ®ã€‚

### 4\. `\-p 11434:11434`ï¼ˆ`\-\-publish`ï¼‰

- ä½œç”¨ï¼šæ˜ å°„ å®¹å™¨ç«¯å£ åˆ° å®¿ä¸»æœºç«¯å£ã€‚

- å‚æ•°ç»“æž„ï¼š`å®¿ä¸»æœºç«¯å£:å®¹å™¨å†…ç«¯å£`

- è¯´æ˜Žï¼š

- å°†å®¿ä¸»æœºçš„ `11434` ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ `11434` ç«¯å£ã€‚

- å¤–éƒ¨é€šè¿‡å®¿ä¸»æœºçš„ `11434` ç«¯å£è®¿é—®å®¹å™¨å†…çš„æœåŠ¡ã€‚

- å…¸åž‹åœºæ™¯ï¼šOllama çš„ API æˆ– Web æœåŠ¡å¯èƒ½é»˜è®¤ç›‘å¬ `11434` ç«¯å£ï¼Œé€šè¿‡æ­¤æ˜ å°„å…è®¸å¤–éƒ¨è®¿é—®ã€‚

### 5\. `\-\-name ollama`

- ä½œç”¨ï¼šä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ª è‡ªå®šä¹‰åç§°ï¼ˆè¿™é‡Œæ˜¯ `ollama`ï¼‰ã€‚

- è¯´æ˜Žï¼š

- å¦‚æžœä¸æŒ‡å®šåç§°ï¼ŒDocker ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšæœºåç§°ï¼ˆå¦‚ `angry\_curie`ï¼‰ã€‚

- è‡ªå®šä¹‰åç§°ä¾¿äºŽåŽç»­é€šè¿‡ `docker start/stop/rm` ç­‰å‘½ä»¤ç®¡ç†å®¹å™¨ã€‚

- å…¸åž‹åœºæ™¯ï¼šç®€åŒ–å®¹å™¨ç®¡ç†ï¼Œé¿å…ä¾èµ–å®¹å™¨ IDã€‚

### 6\. `ollama/ollama`

- ä½œç”¨ï¼šæŒ‡å®šè¦ä½¿ç”¨çš„ Docker é•œåƒã€‚

- è¯´æ˜Žï¼š

- å¦‚æžœæœ¬åœ°ä¸å­˜åœ¨è¯¥é•œåƒï¼ŒDocker ä¼šä»Ž Docker Hub è‡ªåŠ¨æ‹‰å–ã€‚

- æœªæŒ‡å®šæ ‡ç­¾æ—¶ï¼Œé»˜è®¤ä½¿ç”¨ `latest` æ ‡ç­¾ã€‚

- é•œåƒçš„å®Œæ•´æ ¼å¼ä¸º `é•œåƒå:æ ‡ç­¾`ï¼ˆå¦‚ `ollama/ollama:0\.1`ï¼‰ã€‚

- å…¸åž‹åœºæ™¯ï¼šä½¿ç”¨å®˜æ–¹æˆ–è‡ªå®šä¹‰é•œåƒå¯åŠ¨æœåŠ¡ã€‚



## âœ… Ollama å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨

### ðŸ§  1\. æ¨¡åž‹è¿è¡Œä¸Žäº¤äº’



---

### ðŸ“¥ 2\. æ¨¡åž‹ç®¡ç†

---

### âš™ï¸ 3\. æœåŠ¡ä¸ŽåŽå°æŽ§åˆ¶

> ðŸ’¡ é€šå¸¸ä½ ä¸éœ€è¦æ‰‹åŠ¨è¿è¡Œ `serve`ï¼Œå› ä¸º `ollama run` ä¼šè‡ªåŠ¨å¯åŠ¨æœåŠ¡ï¼ˆå¦‚æžœæœªè¿è¡Œï¼‰ã€‚
> 
> 



